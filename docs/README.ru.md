# Интеграция NooPsych Lamp для Home Assistant

![alt text](https://img.shields.io/badge/HACS-Custom-orange.svg)
![alt text](https://img.shields.io/github/v/release/kiff20072008/Noopsych_HAOS_integration)
![alt text](https://img.shields.io/github/issues/kiff20072008/Noopsych_HAOS_integration)
![alt text](https://img.shields.io/github/license/kiff20072008/Noopsych_HAOS_integration)

Кастомная интеграция для Home Assistant, позволяющая управлять светильниками NooPsych по локальной сети.

Эта интеграция была разработана для управления светильником, использующим нестандартный TCP-протокол. Она позволяет переключаться между автоматическим и ручным режимами, а также управлять яркостью шести независимых каналов света. Все управление происходит локально, без использования облачных сервисов.

![alt text](https://user-images.githubusercontent.com/1825451/210137743-f24e9b7a-e4b3-4f96-b072-0051152d1920.png)

(Вам нужно будет сделать скриншот и заменить ссылку на него)

## Возможности

-  Переключение режимов: Управляйте основным режимом работы светильника (Автоматический / Ручной). 
- Управление 6 каналами: В ручном режиме доступно управление яркостью (от 0 до 100%) для каждого из шести каналов света.
- Динамический интерфейс: Слайдеры управления каналами автоматически становятся активными только при включении ручного режима.
- Локальное управление: Взаимодействие с устройством происходит напрямую по локальной сети, обеспечивая высокую скорость отклика и приватность.
- Простая настройка: Интеграция настраивается через графический интерфейс Home Assistant.

## Установка

Рекомендуемый способ установки — через HACS (Home Assistant Community Store).

### Установка через HACS
Перейдите в HACS -> Интеграции.
Нажмите на меню (три точки в правом верхнем углу) и выберите "Пользовательские репозитории".
В поле "Репозиторий" вставьте URL этого репозитория:
code
Code
https://github.com/kiff20072008/Noopsych_HAOS_integration
В поле "Категория" выберите "Интеграция".
Нажмите "Добавить".
Найдите интеграцию "NooPsych Lamp" в списке и нажмите "Установить".
Перезапустите Home Assistant после установки.

### Ручная установка
Скачайте последнюю версию со страницы Релизы.
Распакуйте архив.
Скопируйте папку noopsych_lamp из архива в папку custom_components вашего Home Assistant.
(Путь будет выглядеть так: /config/custom_components/noopsych_lamp).
Перезапустите Home Assistant.

## Настройка

После установки интеграция настраивается через пользовательский интерфейс.

Перейдите в Настройки -> Устройства и службы.
Нажмите кнопку "+ Добавить интеграцию".
Найдите в поиске "NooPsych Lamp" и выберите ее.
В появившемся окне введите IP-адрес вашего светильника в локальной сети.
Нажмите "Отправить".

После этого в Home Assistant появится новое устройство "NooPsych Lamp" с сущностями для управления.

## Использование

Интеграция создает несколько сущностей, связанных с одним устройством:

- switch.noopsych_lamp_manual_mode: Главный переключатель.
Включен (On): Светильник находится в ручном режиме.
Выключен (Off): Светильник находится в автоматическом режиме (работа по графику).
- number.noopsych_lamp_channel_1 ... number.noopsych_lamp_channel_6: Шесть слайдеров для управления яркостью.
Эти слайдеры активны только тогда, когда главный переключатель находится во включенном состоянии (ручной режим).
Изменение значения любого слайдера немедленно отправляет команду на светильник со всеми шестью текущими значениями яркости.

## Известные ограничения

- **Оптимистичный режим**: Интеграция не умеет считывать текущее состояние светильника. Она предполагает, что команда была успешно выполнена. Это означает, что если вы измените режим работы светильника другим способом, Home Assistant об этом не узнает.
- **Начальные значения**: При переключении в ручной режим с помощью главного переключателя, на светильник отправляется команда со 100% яркостью для всех каналов. После этого вы можете настроить их с помощью слайдеров.

## Поддержка и Контрибьюция

Если у вас возникли проблемы, пожалуйста, создайте Issue на GitHub.
Любые улучшения и доработки приветствуются!

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности смотрите в файле `LICENSE`.